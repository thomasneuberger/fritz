@using FritzApp.Resources
@using Microsoft.Extensions.Localization
@inject IStringLocalizer<Localizations> Localizer

@if (IsVisible)
{
    <div class="rules-dialog-overlay" @onclick="Close">
        <div class="rules-dialog-content" @onclick:stopPropagation="true">
            <div class="rules-dialog-header">
                <h2>@Localizer["GameRules"]</h2>
                <button class="close-button" @onclick="Close">âœ•</button>
            </div>
            <div class="rules-dialog-body">
                <div class="rule-section">
                    <h3>@Localizer["BoardSize"]</h3>
                    <p>@Localizer["BoardSizeDescription"]</p>
                </div>
                
                <div class="rule-section">
                    <h3>@Localizer["WinCondition"]</h3>
                    <p>@Localizer["WinConditionDescription"]</p>
                </div>
                
                <div class="rule-section special-rule">
                    <h3>@Localizer["SpecialFritzRule"]</h3>
                    <p>@Localizer["SpecialFritzRuleDescription"]</p>
                    <ul>
                        <li>@((MarkupString)Localizer["OpponentWinsCondition"].Value)</li>
                        <li>@((MarkupString)Localizer["FirstPlayerWinsCondition"].Value)</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
}

@code {
    [Parameter]
    public bool IsVisible { get; set; }

    [Parameter]
    public EventCallback<bool> IsVisibleChanged { get; set; }

    private async Task Close()
    {
        IsVisible = false;
        await IsVisibleChanged.InvokeAsync(IsVisible);
    }
}
